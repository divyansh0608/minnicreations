{"ast":null,"code":"import _slicedToArray from\"D:\\\\minnicreations\\\\ecommerce-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Layout from'./Layout';import{read,listRelated}from'./apiCore';import Card from'./Card';var Product=function Product(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),relatedProduct=_useState4[0],setRelatedProduct=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var loadSingleProduct=function loadSingleProduct(productId){read(productId).then(function(data){if(data.error){setError(data.error);}else{setProduct(data);// fetch related products\nlistRelated(data._id).then(function(data){if(data.error){setError(data.error);}else{setRelatedProduct(data);}});}});};useEffect(function(){var productId=props.match.params.productId;loadSingleProduct(productId);},[props]);return React.createElement(Layout,{title:product&&product.name,description:product&&product.description&&product.description.substring(0,100),className:\"container-fluid\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-8\"},product&&product.description&&React.createElement(Card,{product:product,showViewProductButton:false})),React.createElement(\"div\",{className:\"col-4\"},React.createElement(\"h4\",null,\"Related products\"),relatedProduct.map(function(p,i){return React.createElement(\"div\",{className:\"mb-3\",key:i},React.createElement(Card,{product:p}));}))));};export default Product;","map":{"version":3,"sources":["D:/minnicreations/ecommerce-front/src/core/Product.js"],"names":["React","useState","useEffect","Layout","read","listRelated","Card","Product","props","product","setProduct","relatedProduct","setRelatedProduct","error","setError","loadSingleProduct","productId","then","data","_id","match","params","name","description","substring","map","p","i"],"mappings":"+JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,WAAlC,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAC,KAAK,CAAI,eACSP,QAAQ,CAAC,EAAD,CADjB,wCACdQ,OADc,eACLC,UADK,8BAEuBT,QAAQ,CAAC,EAAD,CAF/B,yCAEdU,cAFc,eAEEC,iBAFF,8BAGKX,QAAQ,CAAC,KAAD,CAHb,yCAGdY,KAHc,eAGPC,QAHO,eAKrB,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,SAAS,CAAI,CACnCZ,IAAI,CAACY,SAAD,CAAJ,CAAgBC,IAAhB,CAAqB,SAAAC,IAAI,CAAI,CACzB,GAAIA,IAAI,CAACL,KAAT,CAAgB,CACZC,QAAQ,CAACI,IAAI,CAACL,KAAN,CAAR,CACH,CAFD,IAEO,CACHH,UAAU,CAACQ,IAAD,CAAV,CACA;AACAb,WAAW,CAACa,IAAI,CAACC,GAAN,CAAX,CAAsBF,IAAtB,CAA2B,SAAAC,IAAI,CAAI,CAC/B,GAAIA,IAAI,CAACL,KAAT,CAAgB,CACZC,QAAQ,CAACI,IAAI,CAACL,KAAN,CAAR,CACH,CAFD,IAEO,CACHD,iBAAiB,CAACM,IAAD,CAAjB,CACH,CACJ,CAND,EAOH,CACJ,CAdD,EAeH,CAhBD,CAkBAhB,SAAS,CAAC,UAAM,CACZ,GAAMc,CAAAA,SAAS,CAAGR,KAAK,CAACY,KAAN,CAAYC,MAAZ,CAAmBL,SAArC,CACAD,iBAAiB,CAACC,SAAD,CAAjB,CACH,CAHQ,CAGN,CAACR,KAAD,CAHM,CAAT,CAKA,MACI,qBAAC,MAAD,EACI,KAAK,CAAEC,OAAO,EAAIA,OAAO,CAACa,IAD9B,CAEI,WAAW,CAAEb,OAAO,EAAIA,OAAO,CAACc,WAAnB,EAAkCd,OAAO,CAACc,WAAR,CAAoBC,SAApB,CAA8B,CAA9B,CAAiC,GAAjC,CAFnD,CAGI,SAAS,CAAC,iBAHd,EAKI,2BAAK,SAAS,CAAC,KAAf,EACI,2BAAK,SAAS,CAAC,OAAf,EACKf,OAAO,EAAIA,OAAO,CAACc,WAAnB,EAAkC,oBAAC,IAAD,EAAM,OAAO,CAAEd,OAAf,CAAwB,qBAAqB,CAAE,KAA/C,EADvC,CADJ,CAKI,2BAAK,SAAS,CAAC,OAAf,EACI,iDADJ,CAEKE,cAAc,CAACc,GAAf,CAAmB,SAACC,CAAD,CAAIC,CAAJ,QAChB,4BAAK,SAAS,CAAC,MAAf,CAAsB,GAAG,CAAEA,CAA3B,EACI,oBAAC,IAAD,EAAM,OAAO,CAAED,CAAf,EADJ,CADgB,EAAnB,CAFL,CALJ,CALJ,CADJ,CAsBH,CAlDD,CAoDA,cAAenB,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { read, listRelated } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Product = props => {\r\n    const [product, setProduct] = useState({});\r\n    const [relatedProduct, setRelatedProduct] = useState([]);\r\n    const [error, setError] = useState(false);\r\n\r\n    const loadSingleProduct = productId => {\r\n        read(productId).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setProduct(data);\r\n                // fetch related products\r\n                listRelated(data._id).then(data => {\r\n                    if (data.error) {\r\n                        setError(data.error);\r\n                    } else {\r\n                        setRelatedProduct(data);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        const productId = props.match.params.productId;\r\n        loadSingleProduct(productId);\r\n    }, [props]);\r\n\r\n    return (\r\n        <Layout\r\n            title={product && product.name}\r\n            description={product && product.description && product.description.substring(0, 100)}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-8\">\r\n                    {product && product.description && <Card product={product} showViewProductButton={false} />}\r\n                </div>\r\n\r\n                <div className=\"col-4\">\r\n                    <h4>Related products</h4>\r\n                    {relatedProduct.map((p, i) => (\r\n                        <div className=\"mb-3\" key={i}>\r\n                            <Card product={p} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}