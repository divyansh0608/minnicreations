{"ast":null,"code":"import _defineProperty from\"D:\\\\minnicreations\\\\ecommerce-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\minnicreations\\\\ecommerce-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\minnicreations\\\\ecommerce-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Link}from'react-router-dom';import{createProduct,getCategories}from'./apiAdmin';//import { createProduct} from './apiAdmin';\nvar AddProduct=function AddProduct(){var _useState=useState({name:'',description:'',price:'',categories:[],category:'',shipping:'',quantity:'',photo:'',loading:false,error:'',createdProduct:'',redirectToProfile:false,formData:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var name=values.name,description=values.description,price=values.price,categories=values.categories,category=values.category,shipping=values.shipping,quantity=values.quantity,loading=values.loading,error=values.error,createdProduct=values.createdProduct,redirectToProfile=values.redirectToProfile,formData=values.formData;//load categories and set form data\nvar init=function init(){getCategories().then(function(data){if(data.error){setValues(_objectSpread({},values,{error:data.error}));}else{setValues(_objectSpread({},values,{categories:data,formData:new FormData()}));}});};useEffect(function(){init();},[]);var handleChange=function handleChange(name){return function(event){var value=name==='photo'?event.target.files[0]:event.target.value;formData.set(name,value);setValues(_objectSpread({},values,_defineProperty({},name,value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread({},values,{error:'',loading:true}));createProduct(user._id,token,formData).then(function(data){if(data.error){setValues(_objectSpread({},values,{error:data.error}));}else{setValues(_objectSpread({},values,{name:'',description:'',photo:'',price:'',quantity:'',loading:false,createdProduct:data.name}));}});};var newPostForm=function newPostForm(){return React.createElement(\"form\",{className:\"mb-3\",onSubmit:clickSubmit},React.createElement(\"h4\",null,\"Post Photo\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"btn btn-secondary\"},React.createElement(\"input\",{onChange:handleChange('photo'),type:\"file\",name:\"photo\",accept:\"image/*\"}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Name\"),React.createElement(\"input\",{onChange:handleChange('name'),type:\"text\",className:\"form-control\",value:name})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Description\"),React.createElement(\"textarea\",{onChange:handleChange('description'),className:\"form-control\",value:description})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Price\"),React.createElement(\"input\",{onChange:handleChange('price'),type:\"number\",className:\"form-control\",value:price})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Category\"),React.createElement(\"select\",{onChange:handleChange('category'),className:\"form-control\"},React.createElement(\"option\",null,\"Please select\"),categories&&categories.map(function(c,i){return React.createElement(\"option\",{key:i,value:c._id},c.name);}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Shipping\"),React.createElement(\"select\",{onChange:handleChange('shipping'),className:\"form-control\"},React.createElement(\"option\",null,\"Please select\"),React.createElement(\"option\",{value:\"0\"},\"No\"),React.createElement(\"option\",{value:\"1\"},\"Yes\"))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Quantity\"),React.createElement(\"input\",{onChange:handleChange('quantity'),type:\"number\",className:\"form-control\",value:quantity})),React.createElement(\"button\",{className:\"btn btn-outline-primary\"},\"Create Product\"));};var showError=function showError(){return React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var showSuccess=function showSuccess(){return React.createElement(\"div\",{className:\"alert alert-info\",style:{display:createdProduct?'':'none'}},React.createElement(\"h2\",null,\"\".concat(createdProduct),\" is created!\"));};var showLoading=function showLoading(){return loading&&React.createElement(\"div\",{className:\"alert alert-success\"},React.createElement(\"h2\",null,\"Loading...\"));};return React.createElement(Layout,{title:\"Add a new product\",description:\"G'day \".concat(user.name,\", ready to add a new product?\")},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-8 offset-md-2\"},showLoading(),showSuccess(),showError(),newPostForm())));};export default AddProduct;","map":{"version":3,"sources":["D:/minnicreations/ecommerce-front/src/admin/AddProduct.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","createProduct","getCategories","AddProduct","name","description","price","categories","category","shipping","quantity","photo","loading","error","createdProduct","redirectToProfile","formData","values","setValues","user","token","init","then","data","FormData","handleChange","event","value","target","files","set","clickSubmit","preventDefault","_id","newPostForm","map","c","i","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { createProduct, getCategories } from './apiAdmin';\r\n//import { createProduct} from './apiAdmin';\r\nconst AddProduct = () => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        photo: '',\r\n        loading: false,\r\n        error: '',\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n\r\n    const { user, token } = isAuthenticated();\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    //load categories and set form data\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    categories: data,\r\n                    formData: new FormData()\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        createProduct(user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity: '',\r\n                    loading: false,\r\n                    createdProduct: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    {categories &&\r\n                        categories.map((c, i) => (\r\n                            <option key={i} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"1\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Create Product</button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdProduct ? '' : 'none' }}>\r\n            <h2>{`${createdProduct}`} is created!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    return (\r\n        <Layout title=\"Add a new product\" description={`G'day ${user.name}, ready to add a new product?`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AddProduct;\r\n"]},"metadata":{},"sourceType":"module"}